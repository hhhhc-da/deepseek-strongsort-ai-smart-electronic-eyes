import{d as u,O as v,B as h,o as d,c,w as p,e as m,u as r,P as g,D as y,T as _,N as w,s as S,x as $,R as x,k as A,aa as B,n as R,i as k,E as b,F as z,m as L,a7 as M}from"./index-zul1sP2k.js";const[C,P]=y("AvatarRoot"),F=u({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return v(),P({imageLoadingStatus:h("loading")}),(a,e)=>(d(),c(r(g),{"as-child":a.asChild,as:a.as},{default:p(()=>[m(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),I=u({__name:"AvatarFallback",props:{delayMs:{default:0},asChild:{type:Boolean},as:{default:"span"}},setup(o){const a=o,e=C();v();const s=h(!1);let n;return _(e.imageLoadingStatus,t=>{t==="loading"&&(s.value=!1,a.delayMs?n=setTimeout(()=>{s.value=!0,clearTimeout(n)},a.delayMs):s.value=!0)},{immediate:!0}),(t,f)=>s.value&&r(e).imageLoadingStatus.value!=="loaded"?(d(),c(r(g),{key:0,"as-child":t.asChild,as:t.as},{default:p(()=>[m(t.$slots,"default")]),_:3},8,["as-child","as"])):w("",!0)}});function j(o,a){const e=h("idle"),s=h(!1),n=t=>()=>{s.value&&(e.value=t)};return S(()=>{s.value=!0,_([()=>o.value,()=>a==null?void 0:a.value],([t,f])=>{if(!t)e.value="error";else{const l=new window.Image;e.value="loading",l.onload=n("loaded"),l.onerror=n("error"),l.src=t,f&&(l.referrerPolicy=f)}},{immediate:!0})}),$(()=>{s.value=!1}),e}const T=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(o,{emit:a}){const e=o,s=a,{src:n,referrerPolicy:t}=x(e);v();const f=C(),l=j(n,t);return _(l,i=>{s("loadingStatusChange",i),i!=="idle"&&(f.imageLoadingStatus.value=i)},{immediate:!0}),(i,E)=>A((d(),c(r(g),{role:"img","as-child":i.asChild,as:i.as,src:r(n),"referrer-policy":r(t)},{default:p(()=>[m(i.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[B,r(l)==="loaded"]])}}),q=u({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(o){const a=o;return(e,s)=>(d(),c(r(F),{class:R(r(k)(r(D)({size:e.size,shape:e.shape}),a.class))},{default:p(()=>[m(e.$slots,"default")]),_:3},8,["class"]))}}),O=u({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(o){const a=o;return(e,s)=>(d(),c(r(I),b(z(a)),{default:p(()=>[m(e.$slots,"default")]),_:3},16))}}),U=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{}},setup(o){const a=o;return(e,s)=>(d(),c(r(T),L(a,{class:"object-cover w-full h-full"}),{default:p(()=>[m(e.$slots,"default")]),_:3},16))}}),D=M("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{U as _,O as a,q as b};
