import{Q as b,av as N,B as S,d as Y,O as V,ad as G,ao as _,aw as L,y as R,ax as x,ay as H,az as $,aA as E,aB as O,o as q,c as X,w as z,e as Q,u as J,P as Z,aC as B,aD as ee,T as j,aE as te,x as ne,p as K,aF as re,aG as oe,aH as P,W as ae,aI as se}from"./index-zul1sP2k.js";import{i as ue}from"./useDirection-B_U0F_uO.js";const Ce="menu.itemSelect",M=["Enter"," "],ie=["ArrowDown","PageUp","Home"],ce=["ArrowUp","PageDown","End"],ke=[...ie,...ce],_e={ltr:[...M,"ArrowRight"],rtl:[...M,"ArrowLeft"]},Fe={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Le(e){return e?"open":"closed"}function le(e){return e==="indeterminate"}function Be(e){return le(e)?"indeterminate":e?"checked":"unchecked"}function Pe(e){const t=b();for(const n of e)if(n===t||(n.focus(),b()!==t))return}function fe(e,t){const{x:n,y:o}=e;let s=!1;for(let i=0,c=t.length-1;i<t.length;c=i++){const f=t[i].x,l=t[i].y,d=t[c].x,u=t[c].y;l>o!=u>o&&n<(d-f)*(o-l)/(u-l)+f&&(s=!s)}return s}function Me(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return fe(n,t)}function Ie(e){return e.pointerType==="mouse"}const de=N(()=>S([]));function pe(){const e=de();return{add(t){const n=e.value[0];t!==n&&(n==null||n.pause()),e.value=I(e.value,t),e.value.unshift(t)},remove(t){var n;e.value=I(e.value,t),(n=e.value[0])==null||n.resume()}}}function I(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function me(e){return e.filter(t=>t.tagName!=="A")}const De=Y({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,o=t,{currentRef:s,currentElement:i}=V(),c=S(null),f=pe(),l=G({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});_(u=>{if(!L)return;const r=i.value;if(!n.trapped)return;function a(y){if(l.paused||!r)return;const h=y.target;r.contains(h)?c.value=h:E(c.value,{select:!0})}function m(y){if(l.paused||!r)return;const h=y.relatedTarget;h!==null&&(r.contains(h)||E(c.value,{select:!0}))}function p(y){r.contains(c.value)||E(r)}document.addEventListener("focusin",a),document.addEventListener("focusout",m);const v=new MutationObserver(p);r&&v.observe(r,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",m),v.disconnect()})}),_(async u=>{const r=i.value;if(await R(),!r)return;f.add(l);const a=b();if(!r.contains(a)){const p=new CustomEvent(x,B);r.addEventListener(x,v=>o("mountAutoFocus",v)),r.dispatchEvent(p),p.defaultPrevented||(H(me($(r)),{select:!0}),b()===a&&E(r))}u(()=>{r.removeEventListener(x,y=>o("mountAutoFocus",y));const p=new CustomEvent(O,B),v=y=>{o("unmountAutoFocus",y)};r.addEventListener(O,v),r.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||E(a??document.body,{select:!0}),r.removeEventListener(O,v),f.remove(l)},0)})});function d(u){if(!n.loop&&!n.trapped||l.paused)return;const r=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,a=b();if(r&&a){const m=u.currentTarget,[p,v]=ee(m);p&&v?!u.shiftKey&&a===v?(u.preventDefault(),n.loop&&E(p,{select:!0})):u.shiftKey&&a===p&&(u.preventDefault(),n.loop&&E(v,{select:!0})):a===m&&u.preventDefault()}}return(u,r)=>(q(),X(J(Z),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:d},{default:z(()=>[Q(u.$slots,"default")]),_:3},8,["as-child","as"]))}});var ve=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},g=new WeakMap,w=new WeakMap,A={},T=0,U=function(e){return e&&(e.host||U(e.parentNode))},ye=function(e,t){return t.map(function(n){if(e.contains(n))return n;var o=U(n);return o&&e.contains(o)?o:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},he=function(e,t,n,o){var s=ye(t,Array.isArray(e)?e:[e]);A[n]||(A[n]=new WeakMap);var i=A[n],c=[],f=new Set,l=new Set(s),d=function(r){!r||f.has(r)||(f.add(r),d(r.parentNode))};s.forEach(d);var u=function(r){!r||l.has(r)||Array.prototype.forEach.call(r.children,function(a){if(f.has(a))u(a);else try{var m=a.getAttribute(o),p=m!==null&&m!=="false",v=(g.get(a)||0)+1,y=(i.get(a)||0)+1;g.set(a,v),i.set(a,y),c.push(a),v===1&&p&&w.set(a,!0),y===1&&a.setAttribute(n,"true"),p||a.setAttribute(o,"true")}catch(h){console.error("aria-hidden: cannot operate on ",a,h)}})};return u(t),f.clear(),T++,function(){c.forEach(function(r){var a=g.get(r)-1,m=i.get(r)-1;g.set(r,a),i.set(r,m),a||(w.has(r)||r.removeAttribute(o),w.delete(r)),m||r.removeAttribute(n)}),T--,T||(g=new WeakMap,g=new WeakMap,w=new WeakMap,A={})}},Ee=function(e,t,n){n===void 0&&(n="data-aria-hidden");var o=Array.from(Array.isArray(e)?e:[e]),s=ve(e);return s?(o.push.apply(o,Array.from(s.querySelectorAll("[aria-live]"))),he(o,s,n,"aria-hidden")):function(){return null}};function Re(e){let t;j(()=>te(e),n=>{n?t=Ee(n):t&&t()}),ne(()=>{t&&t()})}function C(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function F(e,t,n=".",o){if(!C(t))return F(e,{},n,o);const s=Object.assign({},t);for(const i in e){if(i==="__proto__"||i==="constructor")continue;const c=e[i];c!=null&&(o&&o(s,i,c,n)||(Array.isArray(c)&&Array.isArray(s[i])?s[i]=[...c,...s[i]]:C(c)&&C(s[i])?s[i]=F(c,s[i],(n?`${n}.`:"")+i.toString(),o):s[i]=c))}return s}function ge(e){return(...t)=>t.reduce((n,o)=>F(n,o,"",e),{})}const be=ge(),Se=oe(()=>{const e=S(new Map),t=S(),n=K(()=>{for(const c of e.value.values())if(c)return!0;return!1}),o=ue({scrollBody:S(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",P&&(s==null||s()),t.value=void 0};return j(n,(c,f)=>{var r;if(!L)return;if(!c){f&&i();return}t.value===void 0&&(t.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,d={padding:l,margin:0},u=(r=o.scrollBody)!=null&&r.value?typeof o.scrollBody.value=="object"?be({padding:o.scrollBody.value.padding===!0?l:o.scrollBody.value.padding,margin:o.scrollBody.value.margin===!0?l:o.scrollBody.value.margin},d):d:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.body.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),P&&(s=ae(document,"touchmove",a=>we(a),{passive:!1})),R(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function je(e){const t=Math.random().toString(36).substring(2,7),n=Se();n.value.set(t,e??!1);const o=K({get:()=>n.value.get(t)??!1,set:s=>n.value.set(t,s)});return re(()=>{n.value.delete(t)}),o}function W(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:W(n)}}function we(e){const t=e||window.event,n=t.target;return n instanceof Element&&W(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function Ke(e){const t=se("",1e3);return{search:t,handleTypeaheadSearch:(s,i)=>{t.value=t.value+s;{const c=b(),f=i.map(a=>{var m,p;return{...a,textValue:((m=a.value)==null?void 0:m.textValue)??((p=a.ref.textContent)==null?void 0:p.trim())??""}}),l=f.find(a=>a.ref===c),d=f.map(a=>a.textValue),u=xe(d,t.value,l==null?void 0:l.textValue),r=f.find(a=>a.textValue===u);return r&&r.ref.focus(),r==null?void 0:r.ref}},resetTypeahead:()=>{t.value=""}}}function Ae(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function xe(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let c=Ae(e,Math.max(i,0));s.length===1&&(c=c.filter(d=>d!==n));const l=c.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}let k=0;function Ue(){_(e=>{if(!L)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??D()),document.body.insertAdjacentElement("beforeend",t[1]??D()),k++,e(()=>{k===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(n=>n.remove()),k--})})}function D(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}export{ke as F,Ce as I,ce as L,M as S,De as _,je as a,Be as b,Ue as c,Ke as d,Me as e,Pe as f,Le as g,Ie as h,le as i,Fe as j,_e as k,Re as u};
